# 2026-02-12 (목)

## 텔레그램 그룹 프로젝트 분리
- Chris: 프로젝트별 그룹 채팅으로 컨텍스트 관리하고 싶음
- 계획한 그룹 4개:
  1. 🏢 로턴 블로그 — 블로그 콘텐츠 기획/작성/발행
  2. ❄️ KoreaCryo 리뉴얼 — 웹사이트 개발/디자인/배포
  3. 📈 투자 분석 — 종목 분석, 리포트, 포트폴리오
  4. 🏭 회사 운영 — 로턴/크라이오 업무/경영

## 텔레그램 설정 변경
- 문제: 봇이 새 그룹에서 응답 안 함
- 원인: `groupPolicy: "allowlist"` — 등록된 그룹만 허용
- 해결: config.patch 실행
  - `groupPolicy: "open"` — 자동 그룹 허용
  - `allowFrom: ["6948605509"]` — Chris만 봇 초대 가능 (보안)
- Gateway 재시작 완료 (13:59)

## 트러블슈팅 완료 ✅
- "로턴 블로그" 그룹 생성 & 봇 초대했으나 여전히 응답 없음
- Privacy Mode는 이미 disabled 확인됨
- sessions_list에 해당 그룹 세션 없음 → 봇이 메시지를 아예 못 받는 중

### 원인 발견 (14:27)
- 로그 분석: `{"chatId":-5177383418,"title":"Roturn Blog","reason":"not-allowed"}`
- 메시지는 받는데 "not-allowed"로 스킵됨
- **문제:** `groupPolicy: "open"`으로 설정했지만 기존 `groups` allowlist가 있어서 그게 우선 적용됨

### 해결 방법 (14:29)
**임시:** 그룹 ID를 명시적으로 allowlist에 추가
```json
"groups": {
  "-5177383418": { "requireMention": false }
}
```

**영구 해결 (14:31):**
```json
"channels": {
  "telegram": {
    "groups": null,  // allowlist 완전 제거
    "groupPolicy": "open",
    "allowFrom": ["6948605509"]  // Chris만 초대 가능 (보안)
  }
}
```

### 교훈
1. `groupPolicy: "open"`만으로는 불충분 — 기존 `groups` allowlist가 우선됨
2. 진짜 open 모드: `groups: null` + `groupPolicy: "open"`
3. `allowFrom`으로 보안 유지 (Chris만 봇 초대 가능)
4. 앞으로 새 그룹 만들면 설정 없이 바로 작동 ✅
